---
name: ClipBook AI 개발 가이드
description: ClipBook AI 크롬 확장 프로그램 개발을 위한 포괄적인 가이드, 명세 및 참조 문서입니다.
---

# ClipBook AI (PageSaver) 개발 가이드

이 문서는 ClipBook AI 확장 프로그램을 구축하기 위한 핵심 요구 사항, 아키텍처 및 디자인 가이드라인을 제공합니다. 모든 기능 구현 시 이 문서를 참조하세요.

## 1. 프로젝트 개요
**목표:** 드래그로 텍스트를 캡처하고, AI를 사용하여 정리(보고서/메일/노트)한 후, 노션이나 PDF로 저장하는 브라우저 확장 프로그램을 구축합니다.

**핵심 가치:**
-   **시간 단축:** 자동화된 서식 지정.
-   **컨텍스트:** URL, 위치, 시간을 보존.
-   **단순성:** "선택 -> 클릭 -> 완료".

## 2. 기능 명세

### 2-1. 텍스트 수집 (Content Script)
-   **드래그 캡처:** 텍스트 선택 감지 -> 툴팁/버튼 표시 -> 캡처.
-   **단축키:** Alt + 드래그로 빠른 저장.
-   **선택 유형:** 단일 블록(균일) 또는 다중 블록(분산).

### 2-2. AI 요약 (Background/Server)
-   **입력:** 캡처된 텍스트 + 사용자 프롬프트 + 선택된 템플릿.
-   **템플릿:**
    1.  **보고서:** 제목, 배경, 문제, 해결책, 결론.
    2.  **이메일:** 인사말, 핵심 포인트, 요청사항, 첨부파일.
    3.  **노션 노트:** 제목, 관찰, 실행 항목(Action Item).
-   **API:** Gemini / OpenAI / Claude.

### 2-3. 저장 및 통합
-   **노션:**
    -   OAuth를 통한 통합.
    -   페이지(`v1/pages`) 또는 데이터베이스 항목 생성.
    -   블록 형식: 제목 + 텍스트 + 원본 링크.
-   **PDF:** 클라이언트 측 생성 (jspdf/html2canvas) - 제목, 날짜, 출처 포함.
-   **로컬 저장소:** 클립 기록 저장 (팝업 내 최근 10개 제한).

## 3. 기술 아키텍처 (Manifest V3)

### 구조
-   **`manifest.json`**: 권한(storage, activeTab, contextMenus 등), 백그라운드 서비스 워커 설정.
-   **`content.js`**:
    -   `mouseup` / `selectionchange` 이벤트 리스너.
    -   "캡처" 버튼을 위한 오버레이 UI.
    -   `background.js`로 메시지 전달.
-   **`background.js`**:
    -   API 호출 처리(AI, Notion) - 필요 시 CORS 문제 방지.
    -   컨텍스트 메뉴 이벤트 관리.
-   **`popup.html` / `popup.tsx`**:
    -   상호 작용을 위한 메인 UI.
    -   탭: 작성/전송, 저장 대상, 히스토리.

### 기술 스택
-   **프레임워크:** React + Vite (워크스페이스 기반 제안).
-   **스타일링:** CSS Modules 또는 Tailwind, `index.css`를 전역 스타일로 지정.
-   **상태 관리:** React Context 또는 Recoil/Redux (복잡할 경우).

## 4. UI/디자인 가이드라인
**색상:**
-   Primary: `#4361EE`
-   Secondary: `#7209B7`
-   Background: `#FFFFFF`
-   Text: `#212529`

**타이포그래피:**
-   제목: Medium/Semi-Bold (14-16pt)
-   본문: Regular (13pt)

**구성 요소:**
-   **팝업:** 3개 탭 (작성, 저장, 히스토리).
-   **로딩:** Lottie/세그먼트 막대 애니메이션.

## 5. 개발 로드맵 (MVP)
1.  **설정:** Manifest V3, Vite 구성, 기본 폴더 구조.
2.  **캡처:** `content.js` 구현하여 선택 감지 및 콘솔 로그 확인.
3.  **팝업 UI:** 더미 데이터를 사용하여 3탭 레이아웃 구축.
4.  **AI 통합:** Gemini/OpenAI API 연결 및 결과 표시.
5.  **노션/PDF:** 노션 인증/저장 및 PDF 생성 구현.
6.  **다듬기:** 디자인 시스템 및 애니메이션 적용.

## 6. 사용자 흐름 참조
1.  **텍스트 선택** (드래그) -> **확장 프로그램 클릭** -> **팝업 열림** (텍스트 로드됨).
2.  **모드 선택** (보고서/메일/노트) -> **AI 처리** -> **미리보기 그리드**.
3.  **타겟 선택** (노션/PDF) -> **저장** -> **완료 확인**.
