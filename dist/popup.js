import{r as c,j as e,I as f,S as y,d as le,h as de,E as ce,R as Y,s as E,T as xe,P as ge,g as pe,a as me}from"./storage.js";const ue=({clippings:m,onAddClipping:k,onRemoveClipping:d,onStartAI:a,onCaptureFromPage:C,isProcessing:u})=>{const[r,x]=c.useState(""),[l,v]=c.useState(null),I=s=>{if(s.key==="Enter"&&s.ctrlKey){const j=s.currentTarget.value.trim();j&&(k(j),s.currentTarget.value="")}};return e.jsxs("div",{className:"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[e.jsxs("section",{className:"premium-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:e.jsx(f.Clip,{})}),e.jsx("span",{className:"bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"í…ìŠ¤íŠ¸ ìˆ˜ì§‘"})]}),e.jsx("button",{onClick:C,className:"text-xs font-bold px-4 py-2 rounded-full transition-all bg-indigo-50 text-indigo-600 hover:bg-indigo-100 hover:shadow-md active:scale-95 border border-indigo-100",children:"âœ¨ ë“œëž˜ê·¸í•œ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("textarea",{id:"manual-input",placeholder:"ì—¬ê¸°ì— ì§ì ‘ í…ìŠ¤íŠ¸ë¥¼ ìž…ë ¥í•˜ê±°ë‚˜ Ctrl+Enterë¡œ ìˆ˜ì§‘í•˜ì„¸ìš”...",className:"w-full h-36 p-5 text-sm bg-gray-50/50 rounded-2xl border border-gray-100 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-none custom-scrollbar outline-none pb-12",onKeyDown:I}),e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsxs("button",{onClick:()=>{const s=document.getElementById("manual-input");s&&s.value.trim()&&(k(s.value.trim()),s.value="")},className:"group flex items-center justify-center bg-white/80 hover:bg-indigo-600 text-gray-400 hover:text-white border border-gray-100 hover:border-indigo-600 backdrop-blur-sm px-3 py-1.5 rounded-lg shadow-sm transition-all duration-300 min-w-[100px]",children:[e.jsxs("div",{className:"flex items-center gap-1 group-hover:hidden",children:[e.jsx("kbd",{className:"font-sans font-medium text-[10px] bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200",children:"Ctrl"}),e.jsx("span",{className:"text-[10px]",children:"+"}),e.jsx("kbd",{className:"font-sans font-medium text-[10px] bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200",children:"Enter"})]}),e.jsx("span",{className:"hidden group-hover:block text-xs font-bold animate-in fade-in zoom-in-95 duration-200",children:"ìˆ˜ì§‘"})]})})]}),m.length>0&&e.jsx("div",{className:"mt-5 flex flex-col gap-2 max-h-32 overflow-y-auto custom-scrollbar p-1",children:m.map(s=>e.jsxs("div",{className:"group relative bg-white border border-gray-200 text-gray-600 text-xs py-2 px-3 pr-8 rounded-lg shadow-sm hover:shadow-md hover:border-indigo-200 transition-all w-full truncate animate-in zoom-in-95 duration-200 flex items-center",children:[e.jsx("span",{className:"opacity-80",children:s.text}),e.jsx("button",{onClick:()=>d(s.id),className:"absolute right-1 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",children:"âœ•"})]},s.id))})]}),e.jsxs("section",{className:"premium-card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-5 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center text-purple-600",children:"âš¡"}),"ì •ë¦¬ ë°©ì‹ ì„ íƒ"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[{id:y.REPORT,label:"ë³´ê³ ì„œí˜•",icon:"ðŸ“„",desc:"ë¬¸ì„œ ìš”ì•½"},{id:y.EMAIL,label:"ë©”ì¼í˜•",icon:"âœ‰ï¸",desc:"ë©”ì¼ ì´ˆì•ˆ"},{id:y.NOTION,label:"ë…¸ì…˜ ë…¸íŠ¸",icon:"ðŸ“",desc:"êµ¬ì¡°í™” ì •ë¦¬"},{id:y.CARD,label:"ì¹´ë“œë‰´ìŠ¤",icon:"ðŸ“‡",desc:"í•µì‹¬ ìš”ì•½"}].map(s=>e.jsxs("button",{onClick:()=>v(s.id),className:`flex items-center gap-3 p-3 rounded-xl border transition-all duration-300 relative overflow-hidden group text-left ${l===s.id?"border-indigo-500 bg-indigo-50/50 shadow-md ring-1 ring-indigo-500/20":"border-gray-100 hover:border-indigo-200 hover:bg-gray-50 hover:shadow-sm"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg transition-colors shrink-0 ${l===s.id?"bg-white shadow-sm":"bg-gray-100 group-hover:bg-white"}`,children:s.icon}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-xs font-bold ${l===s.id?"text-indigo-700":"text-gray-700"}`,children:s.label}),e.jsx("span",{className:"text-[10px] text-gray-400 mt-0.5",children:s.desc})]}),l===s.id&&e.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"})]},s.id))}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Optional Instruction"}),e.jsx("input",{type:"text",value:r,onChange:s=>x(s.target.value),placeholder:"ì˜ˆ: 'íŒ€ ë‚´ ê³µìœ ìš©ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ ë§íˆ¬ë¡œ ìš”ì•½í•´ì¤˜'",className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all outline-none"})]}),e.jsxs("button",{disabled:!l||m.length===0||u,onClick:()=>l&&a(l,r),className:`w-full py-4 rounded-2xl font-bold text-base shadow-lg transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 relative overflow-hidden group ${!l||m.length===0||u?"bg-gray-100 text-gray-400 cursor-not-allowed shadow-none border border-gray-200":"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:shadow-indigo-500/30"}`,children:[u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"AIê°€ ë¶„ì„ ì¤‘ìž…ë‹ˆë‹¤..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ì •ë¦¬ ì‹œìž‘í•˜ê¸°"}),e.jsx("span",{className:"opacity-70 group-hover:translate-x-1 transition-transform",children:"â†’"})]}),!u&&!(!l||m.length===0)&&e.jsx("div",{className:"absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-20 group-hover:animate-shine"})]})]})]})},he=({history:m,onDelete:k,onExport:d})=>{const[a,C]=c.useState(""),u=m.filter(r=>r.title.toLowerCase().includes(a.toLowerCase())||r.summary.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"flex flex-col gap-6 animate-in fade-in duration-500 pb-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"ì €ìž¥ëœ ë©”ëª¨ ê²€ìƒ‰...",value:a,onChange:r=>C(r.target.value),className:"w-full pl-12 pr-4 py-4 bg-white rounded-2xl shadow-sm border border-gray-100 focus:ring-2 focus:ring-indigo-500 transition-all outline-none"}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]}),e.jsx("div",{className:"flex flex-col gap-4",children:u.length>0?u.map(r=>e.jsxs("div",{onClick:()=>{const x=document.getElementById(`summary-${r.id}`);x&&x.classList.toggle("line-clamp-2")},className:"premium-card p-5 cursor-pointer group hover:border-indigo-300 relative",children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),k(r.id)},className:"absolute top-4 right-4 p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"ì‚­ì œ",children:"âœ•"}),e.jsxs("div",{className:"flex justify-between items-start mb-3 pr-8",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold tracking-wider text-indigo-600 uppercase px-2 py-1 bg-indigo-50 rounded-md border border-indigo-100",children:r.mode}),r.target&&e.jsxs("span",{className:"text-[10px] font-bold tracking-wider text-gray-600 uppercase px-2 py-1 bg-gray-50 rounded-md border border-gray-100",children:["via ",r.target]})]}),e.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:new Date(r.timestamp).toLocaleDateString()})]}),e.jsx("h3",{className:"font-bold text-gray-800 mb-2 text-base group-hover:text-indigo-600 transition-colors line-clamp-1",children:r.title}),e.jsx("p",{id:`summary-${r.id}`,className:"text-sm text-gray-600 line-clamp-2 leading-relaxed transition-all",children:r.summary}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-50 flex items-center justify-between text-[11px] text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5 font-medium",children:[e.jsx(f.Clip,{})," ",r.clippings.length," clips"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:x=>{var v;x.stopPropagation();const l=(v=r.clippings[0])==null?void 0:v.sourceUrl;l&&window.open(l,"_blank")},className:"px-3 py-1.5 bg-gray-50 rounded-lg text-gray-600 font-medium hover:bg-indigo-50 hover:text-indigo-600 transition-colors text-xs border border-gray-200 hover:border-indigo-200",children:"ì›ë¬¸ â†—"}),e.jsx("button",{onClick:x=>{x.stopPropagation(),d("NOTION",r)},className:"px-3 py-1.5 bg-white rounded-lg text-indigo-600 font-bold hover:bg-indigo-600 hover:text-white transition-all text-xs border border-indigo-200 shadow-sm",children:"Notion"}),e.jsx("button",{onClick:x=>{x.stopPropagation(),d("PDF",r)},className:"px-3 py-1.5 bg-white rounded-lg text-red-500 font-bold hover:bg-red-500 hover:text-white transition-all text-xs border border-red-200 shadow-sm",children:"PDF"})]})]})]},r.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full mb-4",children:e.jsx(f.History,{})}),e.jsx("p",{className:"text-sm",children:"ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤."})]})})]})},V=async(m,k,d)=>{const a=document.createElement("div");a.id="pdf-render-container",a.style.position="fixed",a.style.left="-9999px",a.style.top="0",a.style.width="800px",a.style.backgroundColor="white",a.style.padding="60px",a.style.color="#1f2937",a.style.fontFamily="'Noto Sans KR', sans-serif",a.style.lineHeight="1.7";const C=await le.parse(k),u=r=>{switch(r){case y.REPORT:return"border-left: 10px solid #1e40af; padding-left: 30px;";case y.EMAIL:return"border: 1px solid #e5e7eb; border-radius: 12px; padding: 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);";case y.CARD:return"background: linear-gradient(135deg, #4c1d95 0%, #1e1b4b 100%); color: white; padding: 80px; border-radius: 20px; text-align: center;";default:return""}};a.innerHTML=`
    <div style="font-family: sans-serif; ${u(d)}">
      <div style="border-bottom: 2px solid #4f46e5; padding-bottom: 20px; margin-bottom: 30px;">
        <h1 style="font-size: 24pt; margin: 0; color: ${d===y.CARD?"#fff":"#111"};">${m}</h1>
        <p style="font-size: 10pt; color: ${d===y.CARD?"rgba(255,255,255,0.7)":"#6b7280"}; margin-top: 10px;">
          ClipBook AI Researcher Report | ${d} Edition | ${new Date().toLocaleDateString()}
        </p>
      </div>
      <div class="markdown-content" style="font-size: 11pt; color: ${d===y.CARD?"#fff":"#374151"};">
        ${C}
      </div>
      <div style="margin-top: 50px; border-top: 1px solid #eee; padding-top: 20px; font-size: 9pt; color: #9ca3af; text-align: center;">
        Generated by ClipBook AI &copy; ${new Date().getFullYear()}
      </div>
    </div>
    <style>
      .markdown-content h2 { font-size: 18pt; margin-top: 1.5em; border-bottom: 1px solid #eee; padding-bottom: 5px; color: ${d===y.CARD?"#f472b6":"#4b5563"}; }
      .markdown-content p { margin-bottom: 1em; text-align: justify; }
      .markdown-content ul, .markdown-content ol { margin-bottom: 1em; padding-left: 20px; }
      .markdown-content li { margin-bottom: 5px; }
      .markdown-content blockquote { border-left: 4px solid #4f46e5; background: #f9fafb; padding: 10px 20px; margin: 1.5em 0; font-style: italic; color: #4b5563; }
      .markdown-content strong { color: #4f46e5; }
    </style>
  `,document.body.appendChild(a);try{const x=(await de(a,{scale:2,useCORS:!0,logging:!1,backgroundColor:d===y.CARD?"#1e1b4b":"#ffffff"})).toDataURL("image/png"),l=new ce({orientation:"p",unit:"mm",format:"a4"}),v=l.getImageProperties(x),I=l.internal.pageSize.getWidth(),s=v.height*I/v.width;let j=s,w=0;const P=l.internal.pageSize.getHeight();for(l.addImage(x,"PNG",0,w,I,s),j-=P;j>=0;)w=j-s,l.addPage(),l.addImage(x,"PNG",0,w,I,s),j-=P;const O=l.output("datauristring").split(",")[1],K=`${m.replace(/[/\\?%*:|"<>]/g,"").trim()||"ClipBook_Report"}.pdf`;chrome.runtime.sendMessage({action:"DOWNLOAD_FILE",data:{base64:O,filename:K}},h=>{(chrome.runtime.lastError||h&&!h.success)&&console.error("Download message failed:",chrome.runtime.lastError||(h==null?void 0:h.error))})}catch(r){throw console.error("PDF Generation Error:",r),new Error("PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{const r=document.getElementById("pdf-render-container");r&&document.body.removeChild(r)}},fe=()=>{const[m,k]=c.useState("capture"),[d,a]=c.useState([]),[C,u]=c.useState([]),r=Y.useRef(!1),[x,l]=c.useState(""),[v,I]=c.useState(""),[s,j]=c.useState(""),[w,P]=c.useState(""),[S,O]=c.useState(""),[T,K]=c.useState(!0),[h,M]=c.useState("gemini-3-flash-preview"),[$,F]=c.useState(!1),[A,W]=c.useState(!1),[D,R]=c.useState(null),[G,H]=c.useState(null),[L,Q]=c.useState(!1),[B,X]=c.useState(!1),[z,Z]=c.useState(!1),[_,ee]=c.useState(!1),g=(i,n="info")=>{H({message:i,type:n})};c.useEffect(()=>{(async()=>{const t=["history","clippings","apiKey","openaiApiKey","claudeApiKey","notionToken","notionDbId","showFloatingButton","aiModel"],o=await E.get(t);o.history&&u(o.history),o.clippings&&a(o.clippings),o.apiKey&&l(o.apiKey),o.openaiApiKey&&I(o.openaiApiKey),o.claudeApiKey&&j(o.claudeApiKey),o.notionToken&&P(o.notionToken),o.notionDbId&&O(o.notionDbId),o.showFloatingButton!==void 0&&K(o.showFloatingButton);let b=o.aiModel||"gemini-3-flash-preview";const p=["gemini-1.5-flash","gemini-1.5-flash-001","gemini-1.5-flash-latest","gemini-2.0-flash","gemini-2.0-flash-lite-preview-02-05","gemini-2.0-flash-lite","gemini-1.0-pro"],N=["gemini-1.5-pro-001","gemini-pro","gemini-1.5-pro-002","gemini-1.5-pro","gemini-2.0-pro-exp"];(p.includes(b)||N.includes(b))&&(N.includes(b)?b="gemini-3-pro-preview":b="gemini-3-flash-preview",E.set({aiModel:b})),console.log(`[Storage] Loaded AI Model: ${b}`),M(b),r.current=!0})();const n=E.onChange(t=>{t.history!==void 0&&u(t.history),t.clippings!==void 0&&a(t.clippings),t.apiKey!==void 0&&l(t.apiKey),t.openaiApiKey!==void 0&&I(t.openaiApiKey),t.claudeApiKey!==void 0&&j(t.claudeApiKey),t.notionToken!==void 0&&P(t.notionToken),t.notionDbId!==void 0&&O(t.notionDbId),t.showFloatingButton!==void 0&&K(t.showFloatingButton==="true"||t.showFloatingButton===!0),t.aiModel!==void 0&&M(t.aiModel)});return()=>n()},[]),c.useEffect(()=>{r.current&&E.set({history:C})},[C]);const te=i=>{window.confirm("ì •ë§ë¡œ ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(u(n=>n.filter(t=>t.id!==i)),g("ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","info"))},se=async()=>{await E.set({apiKey:x,openaiApiKey:v,claudeApiKey:s,notionToken:w,notionDbId:S,showFloatingButton:T,aiModel:h}),F(!1),g("ì„¤ì •ì´ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},U=i=>{const n={id:Date.now().toString(),text:i,sourceUrl:window.location.href,timestamp:Date.now()},t=[...d,n];a(t),E.set({clippings:t}),g("í…ìŠ¤íŠ¸ê°€ ìˆ˜ì§‘ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},re=i=>{const n=d.filter(t=>t.id!==i);a(n),E.set({clippings:n})},ie=async(i,n)=>{if(d.length===0)return;const t=h.startsWith("gemini"),o=h.startsWith("gpt"),b=h.startsWith("claude");let p="";if(t&&(p=x||void 0||""),o&&(p=v),b&&(p=s),!p){g(`${t?"Gemini":o?"OpenAI":"Anthropic"} API Keyê°€ í•„ìš”í•©ë‹ˆë‹¤. ì„¤ì •(âš™ï¸)ì—ì„œ ìž…ë ¥í•´ì£¼ì„¸ìš”.`,"error"),F(!0);return}W(!0);try{const N=await pe(i,d,n,p,h);R({mode:i,content:N})}catch(N){const q=N instanceof Error?N.message:"AI ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";g(q,"error")}finally{W(!1)}},oe=()=>{chrome.tabs.query({active:!0,currentWindow:!0},i=>{const n=i[0];n!=null&&n.id&&chrome.tabs.sendMessage(n.id,{action:"GET_SELECTION"},t=>{if(chrome.runtime.lastError){g("íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.","error");return}t&&t.text?U(t.text):g("ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.","info")})})},ne=async(i,n,t)=>{var b;if(!D)return;const o={id:Date.now().toString(),title:t,summary:n,clippings:[...d],mode:D.mode,target:i,timestamp:Date.now(),collection:"ì „ì²´"};try{if(i==="PDF")V(t,n,D.mode),g("PDF íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.","success");else if(i==="NOTION"){if(!w||!S){g("Notion ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„¤ì • ë©”ë‰´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.","error"),F(!0);return}chrome.runtime.sendMessage({action:"SAVE_TO_NOTION",data:{token:w,databaseId:S,title:t,content:n,url:((b=d[0])==null?void 0:b.sourceUrl)||"",mode:D.mode}},p=>{p&&p.success?(g("ë…¸ì…˜ íŽ˜ì´ì§€ì— ì„±ê³µì ìœ¼ë¡œ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤!","success"),u(N=>[o,...N]),a([]),R(null)):g("ë…¸ì…˜ ì €ìž¥ ì‹¤íŒ¨: "+((p==null?void 0:p.error)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"),"error")});return}else i==="HISTORY"&&g("ê¸°ë¡ë³´ê´€í•¨ì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.","success");u(p=>[o,...p]),a([]),R(null)}catch(p){console.error(p),g("ì €ìž¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}},ae=async(i,n)=>{var t;try{if(i==="PDF")V(n.title,n.summary,n.mode),g("PDF íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.","success");else if(i==="NOTION"){if(!w||!S){g("Notion ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.","error"),F(!0);return}chrome.runtime.sendMessage({action:"SAVE_TO_NOTION",data:{token:w,databaseId:S,title:n.title,content:n.summary,url:((t=n.clippings[0])==null?void 0:t.sourceUrl)||"",mode:n.mode}},o=>{o&&o.success?g("ë…¸ì…˜ íŽ˜ì´ì§€ì— ì„±ê³µì ìœ¼ë¡œ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤!","success"):g("ë…¸ì…˜ ì €ìž¥ ì‹¤íŒ¨: "+((o==null?void 0:o.error)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"),"error")})}}catch(o){console.error(o),g("ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}};return e.jsxs("div",{className:"h-full bg-[#f8f9fa] text-[#212529] flex flex-col overflow-hidden relative",children:[e.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute -top-[10%] -right-[10%] w-[80%] h-[80%] bg-indigo-200/20 blur-[100px] rounded-full mix-blend-multiply"}),e.jsx("div",{className:"absolute -bottom-[10%] -left-[10%] w-[80%] h-[80%] bg-purple-200/20 blur-[100px] rounded-full mix-blend-multiply"})]}),G&&e.jsx(xe,{message:G.message,type:G.type,onClose:()=>H(null)}),e.jsxs("header",{className:`sticky top-0 z-40 glass-morphism px-6 py-4 flex items-center justify-between transition-all duration-300 ${A?"pointer-events-none opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-200 transform hover:scale-105 transition-transform duration-300",children:e.jsx(f.Clip,{})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-lg font-extrabold tracking-tight bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"ClipBook AI"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"text-[10px] text-gray-500 font-medium tracking-wide",children:"Smart Researcher v1.0"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>!A&&F(!$),disabled:A,className:`p-2.5 rounded-xl transition-all duration-300 flex items-center justify-center ${$?"bg-indigo-50 text-indigo-600 rotate-180 shadow-inner":"text-gray-400 hover:bg-white hover:text-gray-600 hover:shadow-sm"}`,title:"ì„¤ì •",children:e.jsx(f.Settings,{})}),e.jsxs("nav",{className:"flex bg-gray-100/50 p-1 rounded-xl backdrop-blur-sm",children:[e.jsx("button",{onClick:()=>!A&&k("capture"),disabled:A,className:`px-5 py-2 rounded-lg text-xs font-bold transition-all duration-300 ${m==="capture"?"bg-white text-indigo-600 shadow-sm scale-100":"text-gray-400 hover:text-gray-600 scale-95"}`,children:"ìˆ˜ì§‘"}),e.jsx("button",{onClick:()=>!A&&k("history"),disabled:A,className:`px-5 py-2 rounded-lg text-xs font-bold transition-all duration-300 ${m==="history"?"bg-white text-indigo-600 shadow-sm scale-100":"text-gray-400 hover:text-gray-600 scale-95"}`,children:"ê¸°ë¡"})]})]})]}),A&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center glass-morphism animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-[40px] opacity-20 animate-pulse-glow"}),e.jsx("div",{className:"w-24 h-24 border-4 border-indigo-100 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute top-2 left-2 w-20 h-20 border-b-4 border-purple-500 rounded-full animate-spin-slow opacity-60"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-indigo-600 scale-125 animate-float",children:e.jsx(f.Clip,{})})]}),e.jsxs("div",{className:"text-center space-y-3 px-10",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 tracking-tight animate-in slide-in-from-bottom-2 duration-500",children:"AI ë¶„ì„ ì§„í–‰ ì¤‘..."}),e.jsxs("p",{className:"text-sm text-gray-500 font-medium leading-relaxed",children:["ìµœì²¨ë‹¨ Gemini 3.0 ëª¨ë¸ì´ ìˆ˜ì§‘ëœ í…ìŠ¤íŠ¸ë¥¼",e.jsx("br",{}),e.jsx("span",{className:"text-indigo-600 font-bold",children:"ê¹Šì´ ìžˆê²Œ ë¶„ì„í•˜ê³  êµ¬ì¡°í™”"}),"í•˜ê³  ìžˆìŠµë‹ˆë‹¤."]})]}),e.jsx("div",{className:"mt-12 w-48 h-1.5 bg-gray-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-indigo-500 w-full rounded-full animate-shimmer scale-x-[0.6] origin-left"})})]}),$&&e.jsxs("div",{className:"bg-white border-b border-gray-100 px-6 py-4 animate-in slide-in-from-top-2 max-h-[480px] overflow-y-auto custom-scrollbar shadow-inner",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"AI ëª¨ë¸ ì„ íƒ"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:i=>M(i.target.value),className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all cursor-pointer",children:[e.jsxs("optgroup",{label:"Google Gemini (3.0 Preview)",children:[e.jsx("option",{value:"gemini-3-flash-preview",children:"Gemini 3.0 Flash (ìµœì‹  í”„ë¦¬ë·°)"}),e.jsx("option",{value:"gemini-3-pro-preview",children:"Gemini 3.0 Pro (ìµœì‹  í”„ë¦¬ë·°)"})]}),e.jsxs("optgroup",{label:"OpenAI (GPT)",children:[e.jsx("option",{value:"gpt-4o",children:"GPT-4o (Omni)"}),e.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]}),e.jsx("optgroup",{label:"Anthropic (Claude)",children:e.jsx("option",{value:"claude-3-5-sonnet",children:"Claude 3.5 Sonnet"})})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),h.startsWith("gemini")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Gemini API í‚¤"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:L?"text":"password",placeholder:"Gemini API í‚¤ë¥¼ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm pr-10",value:x,onChange:i=>l(i.target.value)}),e.jsx("button",{onClick:()=>Q(!L),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",tabIndex:-1,children:L?e.jsx(f.Eye,{}):e.jsx(f.EyeOff,{})})]})]}),h.startsWith("gpt")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"OpenAI API í‚¤"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:B?"text":"password",placeholder:"sk-...",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm pr-10",value:v,onChange:i=>I(i.target.value)}),e.jsx("button",{onClick:()=>X(!B),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",tabIndex:-1,children:B?e.jsx(f.Eye,{}):e.jsx(f.EyeOff,{})})]})]}),h.startsWith("claude")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Anthropic API í‚¤"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:z?"text":"password",placeholder:"sk-ant-...",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm pr-10",value:s,onChange:i=>j(i.target.value)}),e.jsx("button",{onClick:()=>Z(!z),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",tabIndex:-1,children:z?e.jsx(f.Eye,{}):e.jsx(f.EyeOff,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Notion í†µí•© í† í°"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:_?"text":"password",placeholder:"secret_... (Notion í† í°)",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm pr-10",value:w,onChange:i=>P(i.target.value)}),e.jsx("button",{onClick:()=>ee(!_),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",tabIndex:-1,children:_?e.jsx(f.Eye,{}):e.jsx(f.EyeOff,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Notion ë°ì´í„°ë² ì´ìŠ¤ ID"}),e.jsx("input",{type:"text",placeholder:"ë°ì´í„°ë² ì´ìŠ¤ IDë¥¼ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm",value:S,onChange:i=>O(i.target.value)})]}),e.jsx("div",{className:"mt-4 p-4 bg-indigo-50/50 border border-indigo-100/50 rounded-2xl transition-all hover:bg-indigo-50/80 group",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[13px] font-extrabold text-slate-800 tracking-tight",children:"í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ ì €ìž¥ ë²„íŠ¼ í‘œì‹œ"}),e.jsxs("p",{className:"text-[11px] text-slate-500 font-medium leading-relaxed",children:["ì›¹íŽ˜ì´ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ë“œëž˜ê·¸í•  ë•Œ ",e.jsx("br",{}),e.jsx("span",{className:"text-indigo-600 font-bold decoration-indigo-200 decoration-2 underline-offset-2",children:"ClipBook ì €ìž¥ ë²„íŠ¼"}),"ì„ í‘œì‹œí•©ë‹ˆë‹¤."]})]}),e.jsx("button",{onClick:()=>K(!T),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-indigo-500/20 ${T?"bg-indigo-600 shadow-lg shadow-indigo-200":"bg-slate-200"}`,children:e.jsx("span",{className:`${T?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform duration-300 ease-in-out`})})]})}),e.jsx("button",{onClick:se,className:"w-full mt-2 px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg hover:bg-indigo-700",children:"ì„¤ì • ì €ìž¥"})]}),e.jsx("hr",{className:"my-4 border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-900 flex items-center gap-1",children:e.jsx("span",{children:"ðŸ’¡ ë„ì›€ë§"})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-500 mt-0.5",children:"â‘ "}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-gray-700",children:"Gemini API í‚¤ ë°œê¸‰"}),e.jsx("p",{className:"text-[10px] text-gray-500 leading-snug",children:"Google AI Studioì—ì„œ ë¬´ë£Œë¡œ ë°œê¸‰ë°›ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."}),e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-[10px] text-indigo-600 underline hover:text-indigo-800",children:"API í‚¤ ë°œê¸‰ë°›ê¸° â†’"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"Op"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-gray-700",children:"OpenAI API í‚¤ ë°œê¸‰"}),e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noreferrer",className:"text-[10px] text-indigo-600 underline hover:text-indigo-800",children:"OpenAI í‚¤ ë°œê¸‰ â†’"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-orange-500 mt-0.5",children:"An"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-gray-700",children:"Anthropic API í‚¤ ë°œê¸‰"}),e.jsx("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"text-[10px] text-indigo-600 underline hover:text-indigo-800",children:"Anthropic í‚¤ ë°œê¸‰ â†’"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-indigo-500 mt-0.5",children:"â‘¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-gray-700",children:"Notion ì—°ë™"}),e.jsx("p",{className:"text-[10px] text-gray-500 leading-snug",children:"ìƒˆ í†µí•©ì„ ë§Œë“¤ê³  í† í°ê³¼ ë°ì´í„°ë² ì´ìŠ¤ IDë¥¼ ìž…ë ¥í•˜ì„¸ìš”."}),e.jsx("a",{href:"https://developers.notion.com/docs/create-a-notion-integration",target:"_blank",rel:"noreferrer",className:"text-[10px] text-indigo-600 underline hover:text-indigo-800",children:"Notion í†µí•© ê°€ì´ë“œ â†’"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-indigo-500 mt-0.5",children:"â‘¢"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-gray-700",children:"ë‹¨ì¶•í‚¤ ì•ˆë‚´"}),e.jsxs("p",{className:"text-[10px] text-gray-500 leading-snug",children:[e.jsx("span",{className:"inline-block bg-white border border-gray-200 rounded px-1",children:"Ctrl"}),"+",e.jsx("span",{className:"inline-block bg-white border border-gray-200 rounded px-1",children:"Enter"})," : í…ìŠ¤íŠ¸ ì¦‰ì‹œ ìˆ˜ì§‘",e.jsx("br",{})]})]})]})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 relative z-10 space-y-6",children:m==="capture"?e.jsx(ue,{clippings:d,onAddClipping:U,onRemoveClipping:re,onStartAI:ie,onCaptureFromPage:oe,isProcessing:A}):e.jsx(he,{history:C,onDelete:te,onExport:ae})}),d.length>0&&m==="capture"&&e.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 bg-indigo-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-10 z-50",children:[e.jsxs("span",{className:"text-xs font-bold",children:[d.length,"ê°œì˜ ë¬¸ìž¥ ì„ íƒë¨"]}),e.jsx("div",{className:"h-4 w-[1px] bg-white/20"}),e.jsx("button",{onClick:()=>a([]),className:"text-xs font-medium text-indigo-200 hover:text-white transition-colors",children:"ì´ˆê¸°í™”"})]}),D&&e.jsx(ge,{mode:D.mode,content:D.content,clippings:d,onClose:()=>R(null),onSave:ne})]})},J=document.getElementById("root");if(!J)throw new Error("Could not find root element to mount to");const be=me.createRoot(J);be.render(e.jsx(Y.StrictMode,{children:e.jsx(fe,{})}));
